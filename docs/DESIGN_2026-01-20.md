# Monsoon Fire Portal — Design Notes (2026-01-20)

This document captures the current UI direction and implementation details so the next session can continue seamlessly.

## Product intent
- Primary user: Clients of Monsoon Fire Pottery Studio.
- Secondary user: Staff (role-aware nav stubbed in the shell).
- Experience: Mobile-first, modern, atmospheric, and branded. Left navigation becomes a drawer on small screens.
- Dashboard focus: Client journey snapshot, kiln status, pieces in progress, upcoming classes, studio updates, and a Messages entry point.

## Current layout (high level)
- Shell: Two-column layout (left nav + main content) on desktop, drawer on mobile.
- Top bar: Persistent header with active page label and role pill.
- Dashboard: Hero card + a grid of 3D-style cards.
- Kiln schedule: Kiln status cards + monthly calendar + upcoming firing list + details panel.
- Profile: Account summary, pieces history, membership tier, notification preferences, and studio notes.
- Reservations: Request form + list view for kiln slot capacity (firing type, shelf equivalent, preferred window).
- Messages: Separate page routed via local nav state (not URL routing yet).
- Signed-out: Branded card with logo and sign-in CTA.

## Navigation model (App state)
- Local state controls which view renders:
  - `activeNav` in `web/src/App.tsx`.
  - `CLIENT_NAV` and `STAFF_NAV` define labels/keys.
- Staff role is currently inferred by email domain: `@monsoonfire.com`.
  - This is a placeholder until Firebase custom claims are wired.

### Nav keys
- dashboard
- pieces
- kiln
- classes
- reservations
- events
- membership
- billing
- messages
- support
- staff (staff only)

## Visual system (tokens)
Defined in `web/src/index.css`:
- `--text`: #f7ede5
- `--muted`: #b8aea6
- `--accent`: #ff8b54
- `--accent-soft`: #ffb37a
- `--shadow`: 0 24px 50px rgba(0, 0, 0, 0.35)
- `--display-font`: "Cormorant Garamond" fallback serif

Typography:
- Display: Cormorant Garamond
- Body: Manrope

Notes:
- These are loaded via Google Fonts in `web/src/index.css`.
- If offline fonts are required, download and serve locally.

## Key UI components (CSS classes)
Defined in `web/src/App.css`:
- `.app-shell`, `.app-nav`, `.app-main`, `.top-bar` — layout shell
- `.card`, `.card-3d`, `.hero-card` — surfaces and hero
- `.dashboard-grid`, `.stat`, `.list-row` — dashboard blocks
- `.messages-preview`, `.message` — messaging list
- `.signed-out`, `.signed-out-card` — auth landing

Additional view-specific CSS:
- `web/src/views/KilnScheduleView.css` — kiln cards + calendar grid
- `web/src/views/SupportView.css` — FAQ + support form
- `web/src/views/ProfileView.css` — profile grid, stats, and toggles

## Assets
- Primary logo: `web/public/branding/logo.png`
- Red smoke logo removed per request (no longer used in UI or marketing assets).

## Dashboard content (placeholder data)
Placeholder arrays now live in view/data files:
- Dashboard: `web/src/views/DashboardView.tsx` (`SAMPLE_KILNS`, `SAMPLE_CLASSES`).
- Kiln schedule: `web/src/data/kilnScheduleMock.ts` (`mockKilns`, `mockFirings`).

These are meant to be replaced by Firestore and/or Functions data when backend wiring begins.

## Mobile behavior
- Drawer nav on screens <= 960px.
- Overlay click dismisses nav.
- Hero stacks vertically.
- Grid cards collapse to single column.

## Accessibility & interaction
- Drawer button uses `aria-label`.
- Buttons and nav items are standard `button` elements.
- Reduced motion respects `prefers-reduced-motion`.

## Known gaps (not implemented yet)
- Safety rails (in-flight guards, troubleshooting capture) are not currently wired into the new UI shell.
- No URL-based routing (local state only).
- Staff role is not tied to claims.
- Placeholder data only; no Firestore integration.
- TODO: Staff tools to kick off kiln firings + schedule edits.

## Recommended next steps
1) Wire Firestore for pieces/kilns/classes/updates/messages.
2) Restore troubleshooting capture panel in a hidden or dev-only section.
3) Introduce routing (`react-router`) if multi-page deep linking is required.
4) Replace role inference with Firebase custom claims.
5) Convert repeated CSS into shared tokens (if moving toward a design system).
6) Kiln schedule TODOs:
   - Allow clients to filter kilns by availability or status badges (idle/loading/firing).
   - Optionally surface a dedicated day/week lane calendar with kiln rows.
   - Staff role actions: kick off firings, book maintenance windows, adjust many-to-one schedule entries.
7) Profile TODOs:
   - Flow membership history + success metrics from Firestore (membership tier changes, renewal timeline).
   - Staff-only studio notes/editing of membership perks.
7) Reservations TODOs:
   - Surface reservation capacity totals per window so clients understand availability.
   - Add staff tooling for status updates (confirmed/waitlisted/cancelled) and notifications.

## Files to start with
- `web/src/App.tsx` — layout, navigation logic, dashboard and messages views.
- `web/src/App.css` — component styling, layout, and 3D card look.
- `web/src/index.css` — global tokens and fonts.
