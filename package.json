{
  "scripts": {
    "test:rules": "firebase emulators:exec --config firebase.emulators.local.json --project monsoonfire-portal --only firestore \"node --test scripts/rules/*.rules.test.mjs\"",
    "firestore:rules:sync": "node ./scripts/sync-firestore-rules-releases.mjs",
    "firestore:rules:sync:check": "node ./scripts/sync-firestore-rules-releases.mjs --check --json",
    "firestore:indexes:deploy": "node ./scripts/firestore-indexes-deploy.mjs --project monsoonfire-portal --json",
    "portal:mypieces:authz:check": "node ./scripts/check-portal-mypieces-authz.mjs --json",
    "portal:notifications:authz:check": "node ./scripts/check-portal-notifications-authz.mjs --json",
    "portal:pricing:intake:check": "node ./scripts/check-pricing-and-intake-policy.mjs",
    "verify:local": "npm run test:rules && npm --prefix functions run build && npm --prefix functions run lint && npm --prefix web run build && npm --prefix web run lint",
    "verify:bootstrap": "bash scripts/bootstrap-local.sh",
    "emulators:start": "node ./scripts/start-emulators.mjs",
    "seed:emulators": "FIREBASE_AUTH_EMULATOR_HOST=${FIREBASE_AUTH_EMULATOR_HOST:-127.0.0.1:9099} FIRESTORE_EMULATOR_HOST=${FIRESTORE_EMULATOR_HOST:-127.0.0.1:8085} node ./functions/scripts/seed-emulators.mjs",
    "bootstrap": "npm install && npm --prefix functions install && npm --prefix studio-brain install && npm --prefix web install",
    "build:web": "npm --prefix web run build",
    "build:functions": "npm --prefix functions run build",
    "deploy": "npx firebase-tools deploy --project monsoonfire-portal --non-interactive",
    "deploy:functions": "npx firebase-tools deploy --project monsoonfire-portal --only functions --non-interactive",
    "deploy:hosting": "npx firebase-tools deploy --project monsoonfire-portal --only hosting --non-interactive",
    "deploy:functions-hosting": "npx firebase-tools deploy --project monsoonfire-portal --only functions,hosting --non-interactive",
    "deploy:namecheap": "node ./scripts/deploy-namecheap-portal.mjs",
    "deploy:namecheap:all": "bash ./scripts/deploy-namecheap-live.sh",
    "deploy:namecheap:all:quick": "bash ./scripts/deploy-namecheap-live.sh --no-build",
    "deploy:namecheap:auto": "bash ./scripts/deploy-namecheap-portal-live.sh",
    "deploy:namecheap:verify": "bash ./scripts/deploy-namecheap-portal-live.sh --verify",
    "deploy:namecheap:portal": "npm run deploy:namecheap -- --remote-path portal/ --verify --portal-url https://portal.monsoonfire.com",
    "deploy:namecheap:website": "node ./scripts/deploy-namecheap-website.mjs",
    "deploy:namecheap:portal:quick": "npm run deploy:namecheap:portal -- --no-build",
    "deploy:namecheap:portal:live": "bash ./scripts/deploy-namecheap-portal-live.sh",
    "deploy:preflight": "node ./scripts/deploy-preflight.mjs --target namecheap-portal --json",
    "policy:sot:check": "node ./scripts/policy-single-source-of-truth-check.mjs --json",
    "deploy:evidence:pack": "node ./scripts/deploy-evidence-pack.mjs --target namecheap-portal --json",
    "website:smoke:playwright": "node ./scripts/website-playwright-smoke.mjs",
    "website:kiln-board:check": "node ./scripts/check-website-kiln-board.mjs --json --strict",
    "website:ga:sprint1:check": "node ./scripts/check-website-ga-sprint1-foundations.mjs --json --strict",
    "website:ga:baseline:report": "node ./scripts/build-website-ga-baseline-report.mjs --json",
    "website:ga:event-goal:check": "node ./scripts/check-website-ga-event-goal-coverage.mjs --json --strict",
    "website:ga:campaign:audit": "node ./scripts/audit-website-ga-campaign-links.mjs --json",
    "website:ga:data-package:check": "node ./scripts/check-website-ga-data-package.mjs --json",
    "website:ga:funnel:report": "node ./scripts/build-website-ga-funnel-friction-report.mjs --json",
    "website:ga:experiments:backlog": "node ./scripts/build-website-ga-experiment-backlog.mjs --json",
    "website:ga:content:opportunities": "node ./scripts/build-website-ga-content-opportunities.mjs --json",
    "website:ga:dashboard:weekly": "node ./scripts/build-website-ga-weekly-dashboard.mjs --json",
    "studio:ga:monthly:report": "node ./scripts/build-studio-ga-monthly-review-report.mjs --json",
    "functions:smoke:cors": "node ./scripts/functions-cors-smoke.mjs",
    "functions:profile:coldstart": "node ./scripts/functions-coldstart-profile.mjs --artifact output/functions-coldstart-profile/latest.json",
    "cutover:checklist": "node ./scripts/run-external-cutover-checklist.mjs",
    "website:smoke:playwright:prod": "node ./scripts/website-playwright-smoke.mjs --base-url https://monsoonfire.com --output-dir output/playwright/prod",
    "website:smoke:playwright:install": "npx playwright install chromium",
    "website:serve": "node ./website/scripts/serve.mjs",
    "website:serve:ab": "node ./website/scripts/serve-ab.mjs",
    "website:serve:ncsitebuilder": "node ./website/ncsitebuilder/scripts/serve.mjs",
    "website:serve:ncsitebuilder:ab": "node ./website/scripts/serve-ab.mjs --root ./website/ncsitebuilder",
    "website:deploy:ncsitebuilder": "node ./website/scripts/deploy.mjs",
    "website:deploy:preview": "node ./scripts/deploy-namecheap-preview.mjs",
    "test:e2e": "npx playwright test -c website/playwright.config.mjs",
    "test:e2e:headed": "npx playwright test -c website/playwright.config.mjs --headed",
    "test:e2e:dev": "BASE_URL=${BASE_URL:?Set BASE_URL to your preview URL} npx playwright test -c website/playwright.config.mjs",
    "portal:smoke:playwright": "node ./scripts/portal-playwright-smoke.mjs --output-dir output/playwright/portal",
    "portal:smoke:playwright:local": "node ./scripts/portal-playwright-smoke.mjs --base-url http://127.0.0.1:5173 --output-dir output/playwright/portal/local",
    "portal:smoke:playwright:local:deep": "node ./scripts/portal-playwright-smoke.mjs --base-url http://127.0.0.1:5173 --output-dir output/playwright/portal/local/deep --deep",
    "portal:smoke:playwright:prod": "node ./scripts/portal-playwright-smoke.mjs --base-url https://monsoonfire-portal.web.app --output-dir output/playwright/portal/prod",
    "portal:smoke:playwright:deep": "node ./scripts/portal-playwright-smoke.mjs --base-url https://monsoonfire-portal.web.app --output-dir output/playwright/portal/deep --deep",
    "portal:scan:prod": "node ./scripts/portal-prod-console-scan.mjs --base-url https://portal.monsoonfire.com",
    "portal:scan:prod:show": "node ./scripts/portal-prod-console-scan.mjs --base-url https://portal.monsoonfire.com --show",
    "portal:regression:virtual-staff": "node ./scripts/run-portal-virtual-staff-regression.mjs",
    "portal:regression:virtual-staff:prod": "node ./scripts/run-portal-virtual-staff-regression.mjs --base-url https://portal.monsoonfire.com",
    "portal:smoke:playwright:install": "npx playwright install chromium",
    "lint:policies": "node website/scripts/lint-policies.mjs",
    "test:web": "npm --prefix web run test:run",
    "test:functions": "npm --prefix functions run test",
    "test:studio-brain": "npm --prefix studio-brain run test",
    "test:unit": "npm run test:all",
    "test:full": "npm run test:automation",
    "test:all": "npm run test:functions && npm run test:studio-brain && npm run test:web",
    "hardening:check": "npm --prefix web run test:run -- src/errors/appError.test.ts src/lib/requestTelemetry.test.ts src/lib/safeStorage.test.ts src/api/functionsClient.test.ts",
    "test:automation:unit": "npm run test:all",
    "studio-brain:auth-probe": "node ./scripts/test-studio-brain-auth.mjs",
    "test:automation:gateway": "npm run functions:smoke:cors",
    "test:automation:checks": "npm --prefix web run a11y:smoke",
    "test:automation:ui": "npm run website:smoke:playwright && npm run portal:smoke:playwright",
    "test:automation:ui:deep": "npm run portal:smoke:playwright:deep",
    "test:automation:bundle": "npm run build:web && npm run studio:host:contract:scan && npm run check:studio-brain:bundle",
    "test:automation": "npm run test:automation:unit && npm run test:automation:gateway && npm run test:automation:checks && npm run test:automation:ui && npm run test:automation:bundle",
    "test:automation:deep": "npm run test:automation && npm run functions:smoke:cors -- --base-url https://us-central1-monsoonfire-portal.cloudfunctions.net --origin https://monsoonfire-portal.web.app && npm run test:automation:ui:deep",
    "test:stripe:negative": "npm --prefix functions run build && node --test functions/lib/stripeConfig.test.js",
    "test:journey:contracts": "node ./scripts/check-continue-journey-contract.mjs --strict --json && node ./scripts/check-journey-fixtures.mjs --strict --json",
    "test:journey:fast": "node ./scripts/run-journey-suite.mjs --mode fast --strict --json --artifact output/journey-tests/fast.json",
    "test:journey:deep": "node ./scripts/run-journey-suite.mjs --mode deep --strict --json --artifact output/journey-tests/deep.json",
    "test": "npm run test:full",
    "check:studio-brain:bundle": "node ./scripts/check-studio-brain-bundle.mjs web/dist",
    "studio:env:validate": "npm --prefix studio-brain run env:validate",
    "studio:env:validate:strict": "npm --prefix studio-brain run env:validate -- --strict --json",
    "studio:env:verify": "npm run studio:env:validate:strict && npm run studio:emulator:contract:check:strict && npm run studio:network:check -- --gate --strict --json",
    "guardrails:check": "node ./scripts/stability-guardrails.mjs",
    "guardrails:check:strict": "node ./scripts/stability-guardrails.mjs --strict --json",
    "studio:status": "node ./scripts/studiobrain-status.mjs",
    "studio:check": "node ./scripts/studiobrain-status.mjs --gate",
    "studio:check:safe": "node ./scripts/studiobrain-status.mjs --require-safe",
    "studiobrain:network:check": "node ./scripts/studiobrain-network-check.mjs",
    "studiobrain:network:check:write-state": "node ./scripts/studiobrain-network-check.mjs --write-state",
    "studiobrain:network:check:gate": "node ./scripts/studiobrain-network-check.mjs --gate",
    "studio:network:check": "node ./scripts/studiobrain-network-check.mjs",
    "studio:network:check:write-state": "node ./scripts/studiobrain-network-check.mjs --write-state",
    "studio:network:check:gate": "node ./scripts/studiobrain-network-check.mjs --gate",
    "studio:stack:profile:snapshot": "node ./scripts/studio-stack-profile-snapshot.mjs --json",
    "studio:stack:profile:snapshot:strict": "node ./scripts/studio-stack-profile-snapshot.mjs --strict --json",
    "studio:emulator:contract:check": "node ./scripts/validate-emulator-contract.mjs",
    "studio:emulator:contract:check:strict": "node ./scripts/validate-emulator-contract.mjs --strict",
    "studio:cutover:gate": "node ./scripts/studio-cutover-gate.mjs",
    "cutover:smoke": "node ./scripts/studio-cutover-gate.mjs",
    "studio:host:contract:scan": "node ./scripts/scan-studiobrain-host-contract.mjs",
    "studio:host:contract:scan:strict": "node ./scripts/scan-studiobrain-host-contract.mjs --strict",
    "studio:host:contract:evidence": "node ./scripts/capture-host-contract-evidence.mjs --artifact output/host-contract-evidence/latest.json",
    "functions:type-safety:scan": "node ./scripts/check-functions-type-safety.mjs",
    "integrity:check": "node ./scripts/integrity-check.mjs",
    "integrity:check:strict": "node ./scripts/integrity-check.mjs --strict",
    "integrity:update": "node ./scripts/integrity-check.mjs --update",
    "pr:gate": "node ./scripts/pr-gate.mjs",
    "reliability:once": "node ./scripts/reliability-hub.mjs once",
    "reliability:watch": "node ./scripts/reliability-hub.mjs watch",
    "reliability:report": "node ./scripts/reliability-hub.mjs report --json",
    "house:status": "node ./scripts/reliability-hub.mjs once",
    "house:watch": "node ./scripts/reliability-hub.mjs watch --interval-ms 60000",
    "house:report": "node ./scripts/reliability-hub.mjs report",
    "backup:verify": "node ./scripts/studiobrain-backup-drill.mjs verify",
    "backup:verify:freshness": "node ./scripts/studiobrain-backup-drill.mjs verify --freshness-only --json --strict",
    "backup:restore:drill": "node ./scripts/studiobrain-backup-drill.mjs restore-drill --strict",
    "incident:bundle": "node ./scripts/studiobrain-incident-bundle.mjs",
    "studio:observability:up": "node ./scripts/studiobrain-observability-bundle.mjs up",
    "studio:observability:down": "node ./scripts/studiobrain-observability-bundle.mjs down",
    "studio:observability:status": "node ./scripts/studiobrain-observability-bundle.mjs status",
    "studio:observability:reset": "node ./scripts/studiobrain-observability-bundle.mjs reset",
    "studio:observability:reset:force": "node ./scripts/studiobrain-observability-bundle.mjs reset --yes-i-know --reason scripted-reset",
    "studio:proxy:up": "node ./scripts/studiobrain-proxy-bundle.mjs up",
    "studio:proxy:down": "node ./scripts/studiobrain-proxy-bundle.mjs down",
    "studio:proxy:status": "node ./scripts/studiobrain-proxy-bundle.mjs status",
    "ops:cockpit:start": "node ./scripts/ops-cockpit.mjs start",
    "ops:cockpit:status": "node ./scripts/ops-cockpit.mjs status",
    "ops:cockpit:stop": "node ./scripts/ops-cockpit.mjs stop",
    "ops:cockpit:bundle": "node ./scripts/ops-cockpit.mjs bundle",
    "ops:cockpit:reset": "node ./scripts/ops-cockpit.mjs reset",
    "ops:cockpit:reset:force": "node ./scripts/ops-cockpit.mjs reset --yes-i-know --reason scripted-reset",
    "cutover-watchdog": "node ./scripts/cutover-watchdog.mjs",
    "cutover-watchdog:once": "node ./scripts/cutover-watchdog.mjs once",
    "cutover-watchdog:watch": "node ./scripts/cutover-watchdog.mjs watch",
    "audit:platform:refs": "node ./scripts/ralph-platform-reference-audit.mjs",
    "audit:platform:refs:strict": "node ./scripts/ralph-platform-reference-audit.mjs --strict --skip-tickets --max-actionable 0 --json",
    "audit:platform:refs:strict:all": "node ./scripts/ralph-platform-reference-audit.mjs --strict --max-actionable 138 --json",
    "source:truth:contract": "node ./scripts/source-of-truth-contract-matrix.mjs",
    "source:truth:contract:strict": "node ./scripts/source-of-truth-contract-matrix.mjs --strict --json",
    "docs:contract": "node ./scripts/generate-runtime-docs.mjs",
    "docs:contract:check": "node ./scripts/generate-runtime-docs.mjs --check --json",
    "docs:reservations:check": "node ./scripts/check-reservation-doc-sync.mjs --strict --json",
    "source:truth:deployment": "node ./scripts/source-of-truth-deployment-gates.mjs --strict --json",
    "source:truth:index": "node ./scripts/source-of-truth-index-audit.mjs",
    "source:truth:index:strict": "node ./scripts/source-of-truth-index-audit.mjs --strict --json",
    "agent:surfaces:check": "node ./scripts/check-agent-surfaces.mjs --strict --json",
    "agent:surfaces:check:json": "node ./scripts/check-agent-surfaces.mjs --json",
    "source:truth:deployment:production": "node ./scripts/source-of-truth-deployment-gates.mjs --phase production --strict --json",
    "smoke:phased": "node ./scripts/phased-smoke-gate.mjs --json --strict",
    "well-known:validate": "node ./scripts/validate-well-known.mjs --json",
    "well-known:validate:strict": "node ./scripts/validate-well-known.mjs --strict --json",
    "mobile:store-readiness": "node ./scripts/mobile-store-readiness-gate.mjs --json --strict",
    "epics": "node ./scripts/epic-hub.mjs",
    "epics:jsonl": "node ./scripts/epic-hub.mjs --jsonl",
    "epics:work": "node ./scripts/epic-hub.mjs work",
    "epics:work:jsonl": "node ./scripts/epic-hub.mjs work --jsonl",
    "epics:next": "node ./scripts/epic-hub.mjs next",
    "epics:next:jsonl": "node ./scripts/epic-hub.mjs next --jsonl",
    "epics:swarm": "node ./scripts/epic-hub.mjs swarm",
    "epics:swarm:md": "node ./scripts/epic-hub.mjs swarm --markdown",
    "epics:swarm:json": "node ./scripts/epic-hub.mjs swarm --json",
    "epics:swarm:jsonl": "node ./scripts/epic-hub.mjs swarm --jsonl",
    "epics:agentic": "node ./scripts/epic-hub.mjs agentic",
    "epics:agentic:json": "node ./scripts/epic-hub.mjs agentic --json",
    "epics:agentic:jsonl": "node ./scripts/epic-hub.mjs agentic --jsonl",
    "epics:agentic:run": "node ./scripts/epic-hub-runner.mjs --epic 1-9 --jsonl",
    "epics:agentic:run:md": "node ./scripts/epic-hub-runner.mjs --epic 1-9",
    "epics:work:md": "node ./scripts/epic-hub.mjs work --markdown",
    "epics:json": "node ./scripts/epic-hub.mjs --json",
    "epics:show": "node ./scripts/epic-hub.mjs show",
    "audit:codex-mcp": "node scripts/audit-codex-mcp.mjs",
    "codex:docs:drift": "node ./scripts/codex-docs-drift-check.mjs --json",
    "codex:docs:drift:strict": "node ./scripts/codex-docs-drift-check.mjs --strict --json",
    "codex:doctor": "node ./scripts/codex-doctor.mjs --json",
    "codex:doctor:strict": "node ./scripts/codex-doctor.mjs --strict --json",
    "codex:memory:init": "node ./scripts/codex-memory-pipeline.mjs init --json",
    "codex:memory:status": "node ./scripts/codex-memory-pipeline.mjs status --json",
    "codex:memory:propose": "node ./scripts/codex-memory-pipeline.mjs propose --json",
    "codex:memory:ingest": "node ./scripts/codex-memory-pipeline.mjs ingest --json",
    "codex:memory:accept": "node ./scripts/codex-memory-pipeline.mjs accept --json",
    "codex:toolcall:log": "node ./scripts/codex/log-toolcall.mjs",
    "codex:improve:daily": "node ./scripts/codex/daily-improvement.mjs --dry-run --json",
    "codex:improve:apply": "node ./scripts/codex/daily-improvement.mjs --apply --json",
    "codex:improve:daily:persist": "node ./scripts/codex/daily-improvement.mjs --dry-run --persist-dry-run --json",
    "codex:interaction:daily": "node ./scripts/codex/daily-interaction.mjs --dry-run --json",
    "codex:interaction:daily:persist": "node ./scripts/codex/daily-interaction.mjs --dry-run --persist-dry-run --json",
    "codex:interaction:apply": "node ./scripts/codex/daily-interaction.mjs --apply --json",
    "codex:pr-green:daily": "node ./scripts/codex/daily-pr-green.mjs --dry-run --json",
    "codex:pr-green:daily:persist": "node ./scripts/codex/daily-pr-green.mjs --dry-run --persist-dry-run --json",
    "codex:pr-green:apply": "node ./scripts/codex/daily-pr-green.mjs --apply --json",
    "codex:findings:summary": "node ./scripts/codex/automation-findings-summary.mjs --dry-run --json",
    "codex:findings:summary:apply": "node ./scripts/codex/automation-findings-summary.mjs --apply --json",
    "guard:ephemeral:artifacts": "node ./scripts/check-ephemeral-artifact-tracking.mjs --json",
    "branch:divergence:guard": "node ./scripts/branch-divergence-guard.mjs --json",
    "secrets:health:check": "node ./scripts/credentials-health-check.mjs --json",
    "security:gitleaks:strict": "mkdir -p output/security && gitleaks dir . --config .gitleaks.toml --redact --report-format json --report-path output/security/gitleaks-local-dir.json",
    "portal:pr:functional:gate": "node ./scripts/portal-pr-functional-gate.mjs --json",
    "portal:pr:functional:feedback": "node ./scripts/portal-pr-functional-feedback-loop.mjs --json",
    "portal:canary:auth": "node ./scripts/portal-authenticated-canary.mjs --json",
    "portal:canary:community-layout": "node ./scripts/portal-community-layout-canary.mjs --json",
    "portal:canary:feedback": "node ./scripts/portal-canary-feedback-loop.mjs --json",
    "portal:canary:escalate": "node ./scripts/portal-canary-escalation.mjs --json",
    "portal:fixture:self-heal:feedback": "node ./scripts/portal-fixture-self-healing-loop.mjs --json",
    "portal:index:auto-remediation": "node ./scripts/firestore-index-auto-remediation-loop.mjs --json",
    "portal:automation:dashboard": "node ./scripts/portal-automation-health-dashboard.mjs --json",
    "portal:automation:issues": "node ./scripts/portal-automation-issue-loop.mjs --dry-run --json",
    "portal:automation:issues:apply": "node ./scripts/portal-automation-issue-loop.mjs --apply --json",
    "portal:automation:weekly-digest": "node ./scripts/portal-automation-weekly-digest.mjs --dry-run --json",
    "portal:automation:weekly-digest:apply": "node ./scripts/portal-automation-weekly-digest.mjs --apply --json",
    "cleanup:artifacts:safe": "node ./scripts/cleanup-local-artifacts.mjs --json",
    "cleanup:artifacts:safe:apply": "node ./scripts/cleanup-local-artifacts.mjs --apply --confirm \"CLEAN LOCAL ARTIFACTS\" --json",
    "portal:theme:contrast": "node ./scripts/portal-authenticated-canary.mjs --theme-only --json",
    "portal:promotion:feedback": "node ./scripts/post-deploy-promotion-feedback-loop.mjs --json",
    "portal:prod-smoke:feedback": "node ./scripts/portal-prod-smoke-feedback-loop.mjs --json",
    "portal:index:guard": "node ./scripts/firestore-index-contract-guard.mjs --strict --json",
    "rules:index:drift:blocker": "npm run firestore:rules:sync:check && node ./scripts/firestore-index-contract-guard.mjs --strict --json --no-github --report output/qa/firestore-index-contract-guard-pr.json",
    "portal:fixture:steward": "node ./scripts/portal-fixture-steward.mjs --json",
    "portal:promotion:gate": "node ./scripts/post-deploy-promotion-gate.mjs --json"
  },
  "engines": {
    "node": "22"
  },
  "dependencies": {
    "firebase": "^12.9.0",
    "firebase-functions": "^7.0.6"
  },
  "devDependencies": {
    "@axe-core/playwright": "^4.11.1",
    "@firebase/rules-unit-testing": "^5.0.0",
    "@playwright/test": "^1.58.2",
    "firebase-tools": "15.8.0",
    "playwright": "^1.58.2"
  },
  "overrides": {
    "qs": "^6.14.2"
  }
}
