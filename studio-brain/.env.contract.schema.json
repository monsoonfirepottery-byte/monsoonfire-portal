{
  "version": "1.0.0",
  "name": "studiobrain-runtime-env-contract",
  "description": "Authoritative studio-brain local/hosted environment contract for preflight and smoke contracts.",
  "variables": {
    "STUDIO_BRAIN_HOST": {
      "type": "string",
      "required": true,
      "default": "127.0.0.1",
      "description": "Host binding for studio-brain HTTP server."
    },
    "STUDIO_BRAIN_NETWORK_PROFILE": {
      "type": "string",
      "required": false,
      "default": "local",
      "enum": ["local", "lan-static", "lan-dhcp", "ci"]
    },
    "STUDIO_BRAIN_LOCAL_HOST": {
      "type": "string",
      "required": false,
      "default": "127.0.0.1"
    },
    "STUDIO_BRAIN_LAN_HOST": {
      "type": "string",
      "required": false,
      "default": "studiobrain.local"
    },
    "STUDIO_BRAIN_DHCP_HOST": {
      "type": "string",
      "required": false,
      "default": ""
    },
    "STUDIO_BRAIN_STATIC_IP": {
      "type": "string",
      "required": false,
      "default": ""
    },
    "STUDIO_BRAIN_ALLOWED_HOSTS": {
      "type": "string",
      "required": false,
      "default": ""
    },
    "STUDIO_BRAIN_HOST_STATE_FILE": {
      "type": "string",
      "required": false,
      "default": ".studiobrain-host-state.json"
    },
    "STUDIO_BRAIN_PORT": {
      "type": "integer",
      "required": true,
      "default": 8787,
      "min": 1,
      "max": 65535
    },
    "STUDIO_BRAIN_LOG_LEVEL": {
      "type": "string",
      "required": false,
      "default": "info",
      "enum": ["debug", "info", "warn", "error"]
    },
    "STUDIO_BRAIN_ALLOWED_ORIGINS": {
      "type": "string",
      "required": false,
      "default": "http://127.0.0.1:5173,http://localhost:5173"
    },
    "STUDIO_BRAIN_ADMIN_TOKEN": {
      "type": "string",
      "required": false,
      "sensitive": true
    },
    "STUDIO_BRAIN_JOB_INTERVAL_MS": {
      "type": "integer",
      "required": false,
      "default": 900000,
      "min": 10000,
      "max": 86400000
    },
    "STUDIO_BRAIN_JOB_INITIAL_DELAY_MS": {
      "type": "integer",
      "required": false,
      "default": 0,
      "min": 0,
      "max": 300000
    },
    "STUDIO_BRAIN_JOB_JITTER_MS": {
      "type": "integer",
      "required": false,
      "default": 0,
      "min": 0,
      "max": 120000
    },
    "STUDIO_BRAIN_ENABLE_STARTUP_COMPUTE": {
      "type": "boolean",
      "required": false,
      "default": true
    },
    "STUDIO_BRAIN_SCAN_LIMIT": {
      "type": "integer",
      "required": false,
      "default": 2000,
      "min": 50,
      "max": 20000
    },
    "STUDIO_BRAIN_FIRESTORE_QUERY_TIMEOUT_MS": {
      "type": "integer",
      "required": false,
      "default": 20000,
      "min": 500,
      "max": 120000
    },
    "STUDIO_BRAIN_REQUIRE_FRESH_SNAPSHOT_FOR_READY": {
      "type": "boolean",
      "required": false,
      "default": false
    },
    "STUDIO_BRAIN_READY_MAX_SNAPSHOT_AGE_MINUTES": {
      "type": "integer",
      "required": false,
      "default": 240,
      "min": 5,
      "max": 10080
    },
    "STUDIO_BRAIN_ENABLE_RETENTION_PRUNE": {
      "type": "boolean",
      "required": false,
      "default": false
    },
    "STUDIO_BRAIN_RETENTION_DAYS": {
      "type": "integer",
      "required": false,
      "default": 180,
      "min": 7,
      "max": 3650
    },
    "PGHOST": {
      "type": "string",
      "required": true,
      "default": "127.0.0.1"
    },
    "PGPORT": {
      "type": "integer",
      "required": true,
      "default": 5433,
      "min": 1,
      "max": 65535
    },
    "PGDATABASE": {
      "type": "string",
      "required": true,
      "default": "monsoonfire_studio_os"
    },
    "PGUSER": {
      "type": "string",
      "required": true,
      "default": "postgres"
    },
    "PGPASSWORD": {
      "type": "string",
      "required": true,
      "sensitive": true
    },
    "PGSSLMODE": {
      "type": "string",
      "required": false,
      "default": "disable",
      "enum": ["disable", "prefer", "require"]
    },
    "STUDIO_BRAIN_PG_POOL_MAX": {
      "type": "integer",
      "required": false,
      "default": 10,
      "min": 1,
      "max": 50
    },
    "STUDIO_BRAIN_PG_IDLE_TIMEOUT_MS": {
      "type": "integer",
      "required": false,
      "default": 30000,
      "min": 1000,
      "max": 300000
    },
    "STUDIO_BRAIN_PG_CONNECTION_TIMEOUT_MS": {
      "type": "integer",
      "required": false,
      "default": 10000,
      "min": 1000,
      "max": 120000
    },
    "STUDIO_BRAIN_PG_QUERY_TIMEOUT_MS": {
      "type": "integer",
      "required": false,
      "default": 5000,
      "min": 500,
      "max": 120000
    },
    "REDIS_HOST": {
      "type": "string",
      "required": true,
      "default": "127.0.0.1"
    },
    "REDIS_PORT": {
      "type": "integer",
      "required": true,
      "default": 6379,
      "min": 1,
      "max": 65535
    },
    "REDIS_CONNECT_TIMEOUT_MS": {
      "type": "integer",
      "required": false,
      "default": 5000,
      "min": 500,
      "max": 120000
    },
    "REDIS_COMMAND_TIMEOUT_MS": {
      "type": "integer",
      "required": false,
      "default": 5000,
      "min": 500,
      "max": 120000
    },
    "REDIS_USERNAME": {
      "type": "string",
      "required": false
    },
    "REDIS_PASSWORD": {
      "type": "string",
      "required": false,
      "sensitive": true
    },
    "STUDIO_BRAIN_REDIS_STREAM_NAME": {
      "type": "string",
      "required": true,
      "default": "studiobrain.events"
    },
    "STUDIO_BRAIN_EVENT_BUS_START_ID": {
      "type": "string",
      "required": false,
      "default": "$"
    },
    "STUDIO_BRAIN_EVENT_BUS_POLL_INTERVAL_MS": {
      "type": "integer",
      "required": false,
      "default": 750,
      "min": 100,
      "max": 10000
    },
    "STUDIO_BRAIN_EVENT_BUS_BATCH_SIZE": {
      "type": "integer",
      "required": false,
      "default": 32,
      "min": 1,
      "max": 500
    },
    "STUDIO_BRAIN_ARTIFACT_STORE_ENDPOINT": {
      "type": "url",
      "required": true,
      "default": "http://127.0.0.1:9010"
    },
    "STUDIO_BRAIN_ARTIFACT_STORE_BUCKET": {
      "type": "string",
      "required": true,
      "default": "studiobrain-artifacts"
    },
    "STUDIO_BRAIN_ARTIFACT_STORE_ACCESS_KEY": {
      "type": "string",
      "required": true,
      "sensitive": true
    },
    "STUDIO_BRAIN_ARTIFACT_STORE_SECRET_KEY": {
      "type": "string",
      "required": true,
      "sensitive": true
    },
    "STUDIO_BRAIN_ARTIFACT_STORE_USE_SSL": {
      "type": "boolean",
      "required": false,
      "default": false
    },
    "STUDIO_BRAIN_ARTIFACT_STORE_TIMEOUT_MS": {
      "type": "integer",
      "required": false,
      "default": 5000,
      "min": 500,
      "max": 120000
    },
    "STUDIO_BRAIN_VECTOR_STORE_ENABLED": {
      "type": "boolean",
      "required": false,
      "default": false
    },
    "STUDIO_BRAIN_VECTOR_STORE_TABLE": {
      "type": "string",
      "required": false,
      "default": "swarm_memory"
    },
    "STUDIO_BRAIN_SWARM_ORCHESTRATOR_ENABLED": {
      "type": "boolean",
      "required": false,
      "default": false
    },
    "STUDIO_BRAIN_SWARM_ID": {
      "type": "string",
      "required": false,
      "default": "default-swarm"
    },
    "STUDIO_BRAIN_SWARM_RUN_ID": {
      "type": "string",
      "required": false,
      "default": ""
    },
    "STUDIO_BRAIN_SWARM_EVENT_POLL_MS": {
      "type": "integer",
      "required": false,
      "default": 1000,
      "min": 100,
      "max": 10000
    },
    "STUDIO_BRAIN_SKILL_REGISTRY_LOCAL_PATH": {
      "type": "string",
      "required": false,
      "default": "./skills-registry"
    },
    "STUDIO_BRAIN_SKILL_REGISTRY_REMOTE_BASE_URL": {
      "type": "url",
      "required": false
    },
    "STUDIO_BRAIN_SKILL_INSTALL_ROOT": {
      "type": "string",
      "required": true,
      "default": "/var/lib/studiobrain/skills"
    },
    "STUDIO_BRAIN_SKILL_REQUIRE_PINNING": {
      "type": "boolean",
      "required": false,
      "default": true
    },
    "STUDIO_BRAIN_SKILL_REQUIRE_CHECKSUM": {
      "type": "boolean",
      "required": false,
      "default": true
    },
    "STUDIO_BRAIN_SKILL_REQUIRE_SIGNATURE": {
      "type": "boolean",
      "required": false,
      "default": false
    },
    "STUDIO_BRAIN_SKILL_SIGNATURE_TRUST_KEYS": {
      "type": "string",
      "required": false,
      "sensitive": true,
      "default": "",
      "description": "Skill signature trust anchors as CSV keyId=secret pairs or JSON object map."
    },
    "STUDIO_BRAIN_SKILL_ALLOWLIST": {
      "type": "string",
      "required": false,
      "default": ""
    },
    "STUDIO_BRAIN_SKILL_DENYLIST": {
      "type": "string",
      "required": false,
      "default": ""
    },
    "STUDIO_BRAIN_SKILL_SANDBOX_ENABLED": {
      "type": "boolean",
      "required": false,
      "default": true
    },
    "STUDIO_BRAIN_SKILL_SANDBOX_EGRESS_DENY": {
      "type": "boolean",
      "required": false,
      "default": true
    },
    "STUDIO_BRAIN_SKILL_SANDBOX_EGRESS_ALLOWLIST": {
      "type": "string",
      "required": false,
      "default": ""
    },
    "STUDIO_BRAIN_SKILL_SANDBOX_ENTRY_TIMEOUT_MS": {
      "type": "integer",
      "required": false,
      "default": 15000,
      "min": 250,
      "max": 120000
    },
    "STUDIO_BRAIN_SKILL_RUNTIME_ALLOWLIST": {
      "type": "string",
      "required": false,
      "default": ""
    },
    "STUDIO_BRAIN_ENABLE_WRITE_EXECUTION": {
      "type": "boolean",
      "required": false,
      "default": false
    },
    "STUDIO_BRAIN_REQUIRE_APPROVAL_FOR_EXTERNAL_WRITES": {
      "type": "boolean",
      "required": false,
      "default": true
    },
    "STUDIO_BRAIN_FUNCTIONS_BASE_URL": {
      "type": "url",
      "required": false,
      "default": "https://us-central1-monsoonfire-portal.cloudfunctions.net"
    },
    "STUDIO_BRAIN_DEFAULT_TENANT_ID": {
      "type": "string",
      "required": false,
      "default": "monsoonfire-main"
    },
    "STUDIO_BRAIN_ALLOWED_TENANT_IDS": {
      "type": "string",
      "required": false,
      "default": "monsoonfire-main"
    },
    "STUDIO_BRAIN_STRIPE_READ_ONLY": {
      "type": "boolean",
      "required": false,
      "default": true
    },
    "STRIPE_MODE": {
      "type": "string",
      "required": false,
      "default": "test",
      "enum": ["test", "live"]
    },
    "STUDIO_BRAIN_OTEL_ENABLED": {
      "type": "boolean",
      "required": false,
      "default": false
    },
    "STUDIO_BRAIN_OTEL_ENDPOINT": {
      "type": "url",
      "required": false
    },
    "STUDIO_BRAIN_OTEL_SERVICE_NAME": {
      "type": "string",
      "required": false,
      "default": "studiobrain"
    },
    "FIREBASE_PROJECT_ID": {
      "type": "string",
      "required": false
    },
    "GOOGLE_APPLICATION_CREDENTIALS": {
      "type": "string",
      "required": false
    },
    "PREFLIGHT_TIMEOUT_MS": {
      "type": "integer",
      "required": false,
      "default": 2000,
      "min": 250,
      "max": 30000
    }
  }
}
